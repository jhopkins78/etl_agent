# Flask Backend for Data Analysis

This Flask application provides a backend API for data analysis tasks, specifically designed to work with the Insight Agent for exploratory data analysis (EDA).

## Features

- Upload assignment descriptions as Markdown files
- Run exploratory data analysis (EDA) on sample datasets
- Retrieve generated reports in Markdown format
- Get data previews of CSV files

## API Endpoints

### Upload Assignment

```
POST /upload-assignment
```

Accepts a Markdown (.md) file and saves it as `assignment.md`.

**Request:**
- Form data with a file field named 'file'

**Response:**
```json
{
  "success": true,
  "message": "Assignment uploaded successfully",
  "filename": "assignment.md"
}
```

### Run EDA

```
POST /run-eda
```

Triggers the EDA task using the Insight Agent to analyze the sample dataset and generate a report.

**Request:**
- No request body needed

**Response:**
```json
{
  "success": true,
  "message": "EDA task completed successfully",
  "report_path": "/path/to/reports/final_report.md"
}
```

### Get Final Report

```
GET /final-report
```

Returns the content of the generated final report in Markdown format.

**Response:**
- Markdown content with Content-Type: text/markdown

### Get Data Preview

```
GET /data-preview
```

Returns a preview of the sample dataset, including column names and the first 20 rows.

**Response:**
```json
{
  "success": true,
  "data": {
    "columns": ["column1", "column2", ...],
    "data": [
      {"column1": "value1", "column2": "value2", ...},
      ...
    ]
  }
}
```

## Setup and Installation

1. Create a virtual environment:
   ```
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

2. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

3. Run the application:
   ```
   python app.py
   ```

   The server will start on http://localhost:5000

## Project Structure

```
backend/
├── app.py                         # Main Flask app
├── utils/
│   ├── agent_runner.py            # Handles subprocess execution of Insight Agent
│   └── file_utils.py              # Helpers for saving files and loading previews
├── reports/
│   └── final_report.md            # Final report generated by Insight Agent
├── data/
│   └── enriched/
│       └── sample.csv             # Sample dataset used for EDA
└── assignment.md                  # Uploaded assignment description
```

## Future Enhancements

The backend is designed to be easily extended with additional endpoints for:
- Running modeling tasks
- Returning charts and visualizations
- Supporting multiple datasets
- User authentication and project management
